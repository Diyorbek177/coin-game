<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Coin Game</title>
<style>
body{
margin:0;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
font-family:Arial;
color:white;
}

.card{
background:#111;
padding:30px;
border-radius:25px;
box-shadow:0 0 20px #000;
text-align:center;
width:300px;
}

button{
font-size:22px;
padding:15px 30px;
border-radius:20px;
border:none;
background:#00ffcc;
margin-top:15px;
}

.shop{
margin-top:15px;
font-size:14px;
}
button:active{
transform:scale(0.9);
}
</style>
</head>
<body>

<div class="card">
<h1>ðŸª™ Coin Game</h1>

<h2 id="coin">0</h2>

<button onclick="add()">BOS!</button>

<div class="shop">
<button onclick="buy()">âš¡ +1 Auto (10 coin)</button>
</div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.ready();

// Telegram user ID
const userId = tg.initDataUnsafe?.user?.id || tg.initData?.user?.id || Date.now();
// Elements
let coinEl = document.getElementById("coin");

// Load from storage (per user)
let coin = Number(localStorage.getItem("coin_"+userId)) || 0;
let auto = Number(localStorage.getItem("auto_"+userId)) || 0;

// Update screen
function update(){
  coinEl.innerHTML = coin;
}

// Save
function save(){
  localStorage.setItem("coin_"+userId, coin);
  localStorage.setItem("auto_"+userId, auto);
}

// Click coin
function add(){
  coin++;
  save();
  update();
}

// Buy auto (10 coin = 6 soatlik 300 coin)
function buy(){
  if(coin >= 10){
    coin -= 10;

    // 6 soat davomida 300 coin
    let addCoin = 300;
    let duration = 6 * 60 * 60 * 1000; // 6 soat

    let perSecond = addCoin / (duration / 1000);

    let start = Date.now();

    let timer = setInterval(()=>{
      if(Date.now() - start >= duration){
        clearInterval(timer);
      }else{
        coin += perSecond;
        update();
        save();
      }
    },1000);

    alert("Avtocoin ishga tushdi (6 soat)");
  }
}

update();
</script>

</body>
</html>
